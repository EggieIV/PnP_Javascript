<!DOCTYPE html>
<html>

<head>
    <style>
        * {
            margin: 0;
            padding: 0;

        }

        head,
        footer {
            height: 0px;
        }

        body,
        html,
        #levelContainer {
            overflow: hidden;
            height: 100%;
            width: 100%;
            display: inline-table
        }

        .row {
            display: flex;
        }

        .tile {
            width: 100%;
            margin: 0.2%;
            float: left;
            background: rgba(0, 0, 255, 0.3);

        }

        .tile:hover {
            background: rgba(0, 150, 150, 0.3);
        }

        .char {
            width: 100%;
            height: 100%;
        }

    </style>
</head>

<body onload="drawPlain(30,29)">
    <button onclick="updateFigurine('x',5)">x-5</button>
    
        <button onclick="updateFigurine(5,8)">5-x</button>
    


    <div id="levelContainer"></div>


</body>

<footer>
    <script>
        //why is height/width 100% not working quite right with divs without contents 

        function appendDiv(name, targetElement, index, tileHeight) {
            var template = document.createElement("div");
            template.className = name;
            template.id = name + index;
            if (name == "tile") {

                template.style.height = tileHeight + "px"; //solution is not dynamic
            }
            var element = document.getElementById(targetElement);
            element.appendChild(template);
        }

        function drawPlain(numOfTilesX, numOfTilesY) {
            var bodyHeight = document.body.clientHeight;
            //alert(bodyHeight);
            var rowIndex = -1;
            for (var i = 0; i < numOfTilesX * numOfTilesY; i++) {

                if ((i % numOfTilesY) == 0) {
                    rowIndex++;
                    appendDiv("row", "levelContainer", rowIndex, 0);
                }

                appendDiv("tile", "row" + rowIndex, i, bodyHeight / numOfTilesY); // stupid bodged solution only applies to screen

            }
            //document.getElementById("levelcontainer").height = 200;

        }

        function insertFig(posIndex, src) {


            if (posIndex == 'x') {
                posIndex = 359;
            }

            var element = document.getElementById("tile" + posIndex);
            var template = document.createElement("embed");
            template.className = "char";
            template.id = "Lucina";
            template.src = src;

            element.appendChild(template);


            alert("success");
        }

        function updateFigurine(srcIndexOrContent, destIndex, type = 0) {
            if (typeof(destIndex) != "number") {

                var random = (Math.random() * (724 - 0) + 0)
                while (random == srcIndexOrContent) {
                    //Math.random() * (max - min) + min
                    destIndex = random;
                }
                                   // destIndex = Math.round(random);
                destIndex = 5;

            }

            if (typeof(srcIndexOrContent) == "number") {

                var parentNode = document.getElementById("tile" + srcIndexOrContent);
                if (parentNode.firstChild) {
                    var template = parentNode.removeChild(parentNode.firstChild) // kopiere child element
                    //srcIndexOrContent = childNode;
                }

            } else {
                // importiere cher 

                //placholder creation
                var template = document.createElement("embed");

                if (type == 0) {
                    template.className = "char nonPlayer"
                   // document.getElementById("tile" + destIndex).style = background: rgba(255, 0, 0, 0.3);
                } else {
                    //document.getElementById("tile" + destIndex).style = background: rgba(0, 255, 0, 0.3);
                }
                template.className = "char player";
                template.id = "Lucina";
                template.src = "https://66.media.tumblr.com/1b1a6f840461273875f2853edbd22534/tumblr_orb77x4Ogh1w8kmjqo1_250.png";
            }

            document.getElementById("tile" + destIndex).appendChild(template);


        }

    </script>
</footer>

</html>
